# KiCad Auto-Design Skill V7.0 - ä½¿ç”¨æ‰‹å†Œ

## ğŸ¯ ç‰ˆæœ¬äº®ç‚¹

**KiCadé›†æˆç‰ˆ (V7.0)** - ç›´æ¥ä½¿ç”¨KiCad Python API (pcbnew) è¿›è¡Œè‡ªåŠ¨è®¾è®¡ï¼

## ğŸ“‚ æ–‡ä»¶ç»“æ„

```
PCB-Skills/
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ __init__.py                 # æ¨¡å—å…¥å£ï¼Œç‰ˆæœ¬ä¿¡æ¯
â”‚   â”œâ”€â”€ kicad_integration.py        # KiCad APIé›†æˆå±‚ â­
â”‚   â”œâ”€â”€ power_supply_designer.py    # ç”µæºè®¾è®¡å™¨ â­
â”‚   â”œâ”€â”€ run_kicad_skill.py          # KiCadå¯åŠ¨å™¨ â­
â”‚   â”œâ”€â”€ output_manager.py           # è¾“å‡ºç®¡ç†
â”‚   â””â”€â”€ generators/
â”‚       â”œâ”€â”€ sch_generator_v2.py     # åŸç†å›¾ç”Ÿæˆå™¨
â”‚       â”œâ”€â”€ pcb_generator_v2.py     # PCBç”Ÿæˆå™¨
â”‚       â”œâ”€â”€ footprint_lib.py        # å°è£…åº“
â”‚       â””â”€â”€ layout_manager.py       # å¸ƒå±€ç®¡ç†å™¨
â”‚
â”œâ”€â”€ create_power_supply_v6.py       # V6ä¸“ä¸šç‰ˆï¼ˆæœ€æ–°ï¼‰
â””â”€â”€ output-result/                  # è¾“å‡ºç›®å½•
    â””â”€â”€ 220V_12V_PowerSupply/
        â”œâ”€â”€ v1.0.0/                 # V4ç‰ˆæœ¬
        â”œâ”€â”€ v1.0.1/                 # V5æ™ºèƒ½å¸ƒå±€ç‰ˆ
        â””â”€â”€ v1.0.2/                 # V6ä¸“ä¸šç‰ˆ â­
```

## ğŸš€ ä¸‰ç§ä½¿ç”¨æ¨¡å¼

### æ¨¡å¼1: KiCadæ’ä»¶æ¨¡å¼ï¼ˆæ¨èï¼‰

**æ­¥éª¤ï¼š**
1. æ‰“å¼€KiCad PCBç¼–è¾‘å™¨
2. æ‰“å¼€Tools â†’ Scripting Console
3. è¿è¡Œä»¥ä¸‹ä»£ç ï¼š

```python
import sys
sys.path.insert(0, r'E:\0-007-MyAIOS\projects\kicad-skill-vnc\PCB-Skills\scripts')

from run_kicad_skill import run_in_kicad
run_in_kicad()
```

**æ•ˆæœï¼š**
- ç›´æ¥åœ¨KiCadä¸­è‡ªåŠ¨æ”¾ç½®å…ƒä»¶
- ä½¿ç”¨KiCad APIè¿›è¡Œå¸ƒçº¿
- å®æ—¶æŸ¥çœ‹ç»“æœ

### æ¨¡å¼2: Pythonè„šæœ¬æ¨¡å¼

```bash
cd PCB-Skills
python create_power_supply_v6.py
```

**æ•ˆæœï¼š**
- ç”Ÿæˆ.kicad_schå’Œ.kicad_pcbæ–‡ä»¶
- è¾“å‡ºåˆ°output-resultç›®å½•
- å¯åœ¨KiCadä¸­æ‰“å¼€

### æ¨¡å¼3: ç‹¬ç«‹æ–‡ä»¶ç”Ÿæˆ

```python
from scripts.generators import SchematicFileGeneratorV2, PCBFileGeneratorV2

# åˆ›å»ºåŸç†å›¾
sch_gen = SchematicFileGeneratorV2()
# ... æ·»åŠ å…ƒä»¶å’Œè¿çº¿
sch_gen.save("design.kicad_sch")

# åˆ›å»ºPCB
pcb_gen = PCBFileGeneratorV2()
# ... æ·»åŠ ç»„ä»¶å’Œèµ°çº¿
pcb_gen.save("design.kicad_pcb")
```

## âœ¨ V6ä¸“ä¸šç‰ˆç‰¹æ€§

### 1. åŸç†å›¾è®¾è®¡è§„èŒƒ
âœ… **ç½‘æ ¼å¯¹é½**: æ‰€æœ‰å…ƒä»¶ä½äº2.54mmç½‘æ ¼ä¸Š  
âœ… **ä¿¡å·æµå‘**: ä»å·¦åˆ°å³ï¼Œä»ä¸Šåˆ°ä¸‹  
âœ… **åŠŸèƒ½åˆ†åŒº**: è¾“å…¥â†’ä¿æŠ¤â†’æ•´æµâ†’åŠŸç‡â†’è¾“å‡ºâ†’åé¦ˆ  
âœ… **æœ€å°äº¤å‰**: ä½¿ç”¨ç½‘ç»œæ ‡ç­¾å‡å°‘è¿çº¿äº¤å‰  
âœ… **æ ‡å‡†ç¬¦å·**: ç¬¦åˆKiCadæƒ¯ä¾‹çš„å®Œæ•´ç¬¦å·åº“  

### 2. PCBè®¾è®¡è§„èŒƒ
âœ… **ç”µæµå›è·¯æœ€å°åŒ–**: å…³é”®å™¨ä»¶é è¿‘æ”¾ç½®  
âœ… **åˆ†åŒºå¸ƒå±€**: é«˜å‹/ä½å‹/æ§åˆ¶åˆ†åŒº  
âœ… **èµ°çº¿å®½åº¦åˆ†çº§**:
   - è¾“å‡ºçº§: 1.5mm (å¤§ç”µæµ)
   - é«˜å‹çº§: 1.0-1.2mm
   - åŠŸç‡çº§: 1.0mm
   - ä¿¡å·çº§: 0.3-0.5mm
âœ… **æ˜Ÿå‹æ¥åœ°**: é™ä½åœ°çº¿å™ªå£°  
âœ… **å®‰è§„è·ç¦»**: åˆçº§/æ¬¡çº§éš”ç¦»>6mm  

### 3. å¸ƒå±€ç­–ç•¥
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [ACè¾“å…¥] [ä¿æŠ¤] [æ•´æµ] [é«˜å‹æ»¤æ³¢]        â”‚  é«˜å‹åŒº
â”‚     J1      F1     BR1     C1,C1B       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚        [VIPer22A]  [å˜å‹å™¨]  [è¾“å‡ºæ•´æµ]   â”‚  åŠŸç‡/éš”ç¦»åŒº
â”‚           U1          T1        D1      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚           [è¾“å‡ºæ»¤æ³¢]  [è¾“å‡ºç«¯å­]          â”‚  ä½å‹åŒº
â”‚              C3,C4      J2              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚     [åé¦ˆç”µè·¯: U2(PC817) + U3(TL431)]   â”‚  æ§åˆ¶åŒº
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”§ KiCadé›†æˆAPIä½¿ç”¨

### åŸºæœ¬APIè°ƒç”¨

```python
from scripts.kicad_integration import KiCadAPI

# åˆå§‹åŒ–ï¼ˆä½¿ç”¨å½“å‰æ‰“å¼€çš„PCBï¼‰
api = KiCadAPI()

# è·å–å…ƒä»¶åˆ—è¡¨
components = api.get_components()
for comp in components:
    print(f"{comp.reference}: {comp.position}")

# è‡ªåŠ¨å¸ƒå±€
result = api.auto_place_components(strategy="grid")
print(f"æ”¾ç½®äº† {result['placed']} ä¸ªå…ƒä»¶")

# ç§»åŠ¨å…ƒä»¶
api.place_component("U1", x=50, y=60, rotation=90)

# æ·»åŠ èµ°çº¿
api.add_track(
    start=(50, 60), 
    end=(70, 60), 
    net_name="VCC", 
    width=1.0
)

# ä¿å­˜
api.save_board()
```

### ç”µæºè®¾è®¡å™¨ä½¿ç”¨

```python
from scripts.power_supply_designer import PowerSupplyDesigner
from scripts.kicad_integration import KiCadAPI

# åˆ›å»ºAPI
api = KiCadAPI()

# åˆ›å»ºè®¾è®¡å™¨
designer = PowerSupplyDesigner(api)

# åˆ›å»ºå®Œæ•´è®¾è®¡
result = designer.create_220v_to_12v_design()

# ä¼˜åŒ–æ£€æŸ¥
opt = designer.optimize_layout()
print(opt['details'])
```

## ğŸ“Š ç‰ˆæœ¬å¯¹æ¯”

| ç‰¹æ€§ | V4 | V5 | V6 (æœ€æ–°) |
|------|-----|-----|-----------|
| åŸç†å›¾ç½‘æ ¼å¯¹é½ | âœ“ | âœ“ | âœ“ (2.54mm) |
| PCBåˆ†åŒºå¸ƒå±€ | âœ“ | âœ“ | âœ“ (ä¸“ä¸šåˆ†åŒº) |
| èµ°çº¿å®½åº¦åˆ†çº§ | âœ— | âœ— | âœ“ |
| æ˜Ÿå‹æ¥åœ° | âœ— | âœ— | âœ“ |
| KiCad APIé›†æˆ | âœ— | âœ— | âœ“ |
| è‡ªåŠ¨å¸ƒå±€ç­–ç•¥ | åŸºç¡€ | åˆ†åŒº | ä¸“ä¸šçº§ |
| ç”µæµå›è·¯ä¼˜åŒ– | åŸºç¡€ | ä¸­ç­‰ | æœ€ä¼˜ |

## ğŸ“ è®¾è®¡è¦ç‚¹ï¼ˆåŸºäºä¸šç•Œæœ€ä½³å®è·µï¼‰

### 1. å…ƒä»¶å¸ƒå±€åŸåˆ™
- **è¾“å…¥ç”µå®¹** < 2mm è·ç¦»æ•´æµæ¡¥
- **VIPer22A** é è¿‘å˜å‹å™¨å’Œè¾“å…¥ç”µå®¹
- **è¾“å‡ºäºŒæç®¡** é è¿‘å˜å‹å™¨æ¬¡çº§
- **åé¦ˆå…ƒä»¶** è¿œç¦»åŠŸç‡çº§

### 2. å¸ƒçº¿åŸåˆ™
- **é«˜å‹èµ°çº¿** ç²—è€ŒçŸ­ï¼ˆé™ä½ç”µæ„Ÿï¼‰
- **åŠŸç‡å›è·¯** é¢ç§¯æœ€å°åŒ–ï¼ˆé™ä½EMIï¼‰
- **åé¦ˆä¿¡å·** ç»†è€Œç‹¬ç«‹ï¼ˆé¿å…å¹²æ‰°ï¼‰
- **åœ°çº¿** æ˜Ÿå‹è¿æ¥ï¼ˆé™ä½å™ªå£°ï¼‰

### 3. å®‰è§„è¦æ±‚
- **L-Né—´è·**: >2.5mmï¼ˆè¾“å…¥ç«¯ï¼‰
- **åˆçº§-æ¬¡çº§**: >6.4mmï¼ˆéš”ç¦»åŒºï¼‰
- **çˆ¬ç”µè·ç¦»**: æ²¿é¢è·ç¦»>6mm
- **ç”µæ°”é—´éš™**: ç©ºæ°”è·ç¦»>3mm

## ğŸ” æ•…éšœæ’é™¤

### é—®é¢˜1: KiCad APIä¸å¯ç”¨
```python
# æ£€æŸ¥KiCadæ˜¯å¦å®‰è£…
import pcbnew
print(pcbnew.GetBuildVersion())
```

### é—®é¢˜2: å…ƒä»¶æ— æ³•æ”¾ç½®
- ç¡®ä¿PCBæ–‡ä»¶å·²æ‰“å¼€
- æ£€æŸ¥å…ƒä»¶ä½å·æ˜¯å¦æ­£ç¡®
- ç¡®è®¤åæ ‡åœ¨æ¿æ¡†èŒƒå›´å†…

### é—®é¢˜3: èµ°çº¿å¤±è´¥
- æ£€æŸ¥ç½‘ç»œåç§°æ˜¯å¦å­˜åœ¨
- ç¡®è®¤èµ·ç‚¹/ç»ˆç‚¹åæ ‡æœ‰æ•ˆ
- éªŒè¯èµ°çº¿å®½åº¦ç¬¦åˆDRC

## ğŸ“š å‚è€ƒæ–‡æ¡£

### KiCad Python API
- [KiCad Python APIæ–‡æ¡£](https://docs.kicad.org/doxygen-python/)
- [pcbnewæ¨¡å—å‚è€ƒ](https://docs.kicad.org/doxygen-python/namespacepcbnew.html)

### ç”µæºè®¾è®¡è§„èŒƒ
- TI: PCB Layout Guidelines for Switching Power Supplies
- ST: Application Note on SMPS Layout
- IPC-2221: PCB Design Standards

### å®‰è§„æ ‡å‡†
- IEC 60950-1 / IEC 62368-1
- UL 60950-1
- GB 4943.1

## ğŸ“ æ›´æ–°æ—¥å¿—

### V7.0.0 (2026-02-07)
- âœ¨ KiCad Python APIé›†æˆ
- âœ¨ ä¸“ä¸šçº§è‡ªåŠ¨å¸ƒå±€ç®—æ³•
- âœ¨ ç”µæºä¸“ç”¨è®¾è®¡å™¨
- âœ¨ æ˜Ÿå‹æ¥åœ°ç³»ç»Ÿ
- âœ¨ èµ°çº¿å®½åº¦åˆ†çº§

### V6.0.0 (2026-02-07)
- âœ¨ ä¸¥æ ¼ç½‘æ ¼å¯¹é½ (2.54mm)
- âœ¨ ç”µæµå›è·¯æœ€å°åŒ–
- âœ¨ ä¸“ä¸šåˆ†åŒºå¸ƒå±€
- âœ¨ å®‰è§„è·ç¦»æ£€æŸ¥

### V5.0.0 (2026-02-07)
- âœ¨ æ™ºèƒ½å¸ƒå±€ç³»ç»Ÿ
- âœ¨ åˆ†åŒºå¸ƒçº¿ç­–ç•¥
- âœ¨ è‡ªåŠ¨ç‰ˆæœ¬ç®¡ç†

### V4.0.0 (2026-02-07)
- âœ¨ å®Œæ•´å°è£…å®šä¹‰
- âœ¨ è‡ªåŠ¨ç½‘ç»œç®¡ç†
- âœ¨ æ™ºèƒ½å¼•è„šè¿æ¥

## ğŸ‘¨â€ğŸ’» å¼€å‘å›¢é˜Ÿ

**KiCad Auto-Design Skill**  
ç‰ˆæœ¬: 7.0.0 (KiCadé›†æˆç‰ˆ)  
ä½œè€…: AI Assistant  
è®¸å¯: MIT License

---

**ç¥æ‚¨è®¾è®¡é¡ºåˆ©ï¼** ğŸ‰
